!function(t){function e(s){if(i[s])return i[s].exports;var a=i[s]={exports:{},id:s,loaded:!1};return t[s].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){i(7),i(9),i(5),i(6),i(8),i(12),i(11),t.exports=i(10)},function(t,e){t.exports=jQuery},,,,function(t,e,i){var s,a,n,s,a,o,s,a,r,a,s,d,s,d;!function(t,o){s=[i(1)],a=o,!(n="function"==typeof a?a.apply(e,s):a)}(this,function(t){function e(e){return e[0]&&t.isPlainObject(e[0])?this.data=e[0]:this.el=e,this.isCoords=!0,this.coords={},this.init(),this}var i=e.prototype;return i.init=function(){this.set(),this.original_coords=this.get()},i.set=function(t,e){var i=this.el;if(i&&!t&&(this.data=i.offset(),this.data.width=i.width(),this.data.height=i.height()),i&&t&&!e){var s=i.offset();this.data.top=s.top,this.data.left=s.left}var a=this.data;return"undefined"==typeof a.left&&(a.left=a.x1),"undefined"==typeof a.top&&(a.top=a.y1),this.coords.x1=a.left,this.coords.y1=a.top,this.coords.x2=a.left+a.width,this.coords.y2=a.top+a.height,this.coords.cx=a.left+a.width/2,this.coords.cy=a.top+a.height/2,this.coords.width=a.width,this.coords.height=a.height,this.coords.el=i||!1,this},i.update=function(e){if(!e&&!this.el)return this;if(e){var i=t.extend({},this.data,e);return this.data=i,this.set(!0,!0)}return this.set(!0),this},i.get=function(){return this.coords},i.destroy=function(){this.el.removeData("coords"),delete this.el},t.fn.coords=function(){if(this.data("coords"))return this.data("coords");var t=new e(this,arguments[0]);return this.data("coords",t),t},e}),function(t,r){s=[i(1),n],a=r,!(o="function"==typeof a?a.apply(e,s):a)}(this,function(t,e){function i(e,i,a){this.options=t.extend(s,a),this.$element=e,this.last_colliders=[],this.last_colliders_coords=[],this.set_colliders(i),this.init()}var s={colliders_context:document.body,overlapping_region:"C"};i.defaults=s;var a=i.prototype;return a.init=function(){this.find_collisions()},a.overlaps=function(t,e){var i=!1,s=!1;return(e.x1>=t.x1&&e.x1<=t.x2||e.x2>=t.x1&&e.x2<=t.x2||t.x1>=e.x1&&t.x2<=e.x2)&&(i=!0),(e.y1>=t.y1&&e.y1<=t.y2||e.y2>=t.y1&&e.y2<=t.y2||t.y1>=e.y1&&t.y2<=e.y2)&&(s=!0),i&&s},a.detect_overlapping_region=function(t,e){var i="",s="";return t.y1>e.cy&&t.y1<e.y2&&(i="N"),t.y2>e.y1&&t.y2<e.cy&&(i="S"),t.x1>e.cx&&t.x1<e.x2&&(s="W"),t.x2>e.x1&&t.x2<e.cx&&(s="E"),i+s||"C"},a.calculate_overlapped_area_coords=function(e,i){var s=Math.max(e.x1,i.x1),a=Math.max(e.y1,i.y1),n=Math.min(e.x2,i.x2),o=Math.min(e.y2,i.y2);return t({left:s,top:a,width:n-s,height:o-a}).coords().get()},a.calculate_overlapped_area=function(t){return t.width*t.height},a.manage_colliders_start_stop=function(e,i,s){for(var a=this.last_colliders_coords,n=0,o=a.length;o>n;n++)-1===t.inArray(a[n],e)&&i.call(this,a[n]);for(var r=0,d=e.length;d>r;r++)-1===t.inArray(e[r],a)&&s.call(this,e[r])},a.find_collisions=function(e){for(var i=this,s=this.options.overlapping_region,a=[],n=[],o=this.colliders||this.$colliders,r=o.length,d=i.$element.coords().update(e||!1).get();r--;){var l=i.$colliders?t(o[r]):o[r],h=l.isCoords?l:l.coords(),c=h.get(),u=i.overlaps(d,c);if(u){var _=i.detect_overlapping_region(d,c);if(_===s||"all"===s){var p=i.calculate_overlapped_area_coords(d,c),g=i.calculate_overlapped_area(p),f={area:g,area_coords:p,region:_,coords:c,player_coords:d,el:l};i.options.on_overlap&&i.options.on_overlap.call(this,f),a.push(h),n.push(f)}}}return(i.options.on_overlap_stop||i.options.on_overlap_start)&&this.manage_colliders_start_stop(a,i.options.on_overlap_start,i.options.on_overlap_stop),this.last_colliders_coords=a,n},a.get_closest_colliders=function(t){var e=this.find_collisions(t);return e.sort(function(t,e){return"C"===t.region&&"C"===e.region?t.coords.y1<e.coords.y1||t.coords.x1<e.coords.x1?-1:1:(t.area<e.area,1)}),e},a.set_colliders=function(e){"string"==typeof e||e instanceof t?this.$colliders=t(e,this.options.colliders_context).not(this.$element):this.colliders=t(e)},t.fn.collision=function(t,e){return new i(this,t,e)},i}),function(t,e){t.delay=function(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},t.debounce=function(t,e,i){var s;return function(){var a=this,n=arguments,o=function(){s=null,i||t.apply(a,n)};i&&!s&&t.apply(a,n),clearTimeout(s),s=setTimeout(o,e)}},t.throttle=function(t,e){var i,s,a,n,o,r,d=debounce(function(){o=n=!1},e);return function(){i=this,s=arguments;var l=function(){a=null,o&&t.apply(i,s),d()};return a||(a=setTimeout(l,e)),n?o=!0:r=t.apply(i,s),d(),n=!0,r}}}(window),function(t,n){s=[i(1)],a=n,!(r="function"==typeof a?a.apply(e,s):a)}(this,function(t){function e(e,s){this.options=t.extend({},i,s),this.$document=t(document),this.$container=t(e),this.$dragitems=t(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.id=d(),this.ns=".gridster-draggable-"+this.id,this.init()}var i={items:"li",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1,remove_helper:!0},s=t(window),a={x:"left",y:"top"},n=!!("ontouchstart"in window),o=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},r=0,d=function(){return++r+""};e.defaults=i;var l=e.prototype;return l.init=function(){var e=this.$container.css("position");this.calculate_dimensions(),this.$container.css("position","static"===e?"relative":e),this.disabled=!1,this.events(),t(window).bind(this.nsEvent("resize"),throttle(t.proxy(this.calculate_dimensions,this),200))},l.nsEvent=function(t){return(t||"")+this.ns},l.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")},this.$container.on(this.nsEvent("selectstart"),t.proxy(this.on_select_start,this)),this.$container.on(this.pointer_events.start,this.options.items,t.proxy(this.drag_handler,this)),this.$document.on(this.pointer_events.end,t.proxy(function(t){this.is_dragging=!1,this.disabled||(this.$document.off(this.pointer_events.move),this.drag_start&&this.on_dragstop(t))},this))},l.get_actual_pos=function(t){var e=t.position();return e},l.get_mouse_pos=function(t){if(t.originalEvent&&t.originalEvent.touches){var e=t.originalEvent;t=e.touches.length?e.touches[0]:e.changedTouches[0]}return{left:t.clientX,top:t.clientY}},l.get_offset=function(e){e.preventDefault();var i=this.get_mouse_pos(e),s=Math.round(i.left-this.mouse_init_pos.left),a=Math.round(i.top-this.mouse_init_pos.top),n=Math.round(this.el_init_offset.left+s-this.baseX+t(window).scrollLeft()-this.win_offset_x),o=Math.round(this.el_init_offset.top+a-this.baseY+t(window).scrollTop()-this.win_offset_y);return this.options.limit&&(n>this.player_max_left?n=this.player_max_left:n<this.player_min_left&&(n=this.player_min_left)),{position:{left:n,top:o},pointer:{left:i.left,top:i.top,diff_left:s+(t(window).scrollLeft()-this.win_offset_x),diff_top:a+(t(window).scrollTop()-this.win_offset_y)}}},l.get_drag_data=function(t){var e=this.get_offset(t);return e.$player=this.$player,e.$helper=this.helper?this.$helper:this.$player,e},l.set_limits=function(t){return t||(t=this.$container.width()),this.player_max_left=t-this.player_width+-this.options.offset_left,this.options.container_width=t,this},l.scroll_in=function(e,i){var n,r=a[e],d=50,l=30,h="x"===e,c=h?this.window_width:this.window_height,u=h?t(document).width():t(document).height(),_=h?this.$player.width():this.$player.height(),p=s["scroll"+o(r)](),g=p,f=g+c,m=f-d,v=g+d,w=g+i.pointer[r],y=u-c+_;return w>=m&&(n=p+l,y>n&&(s["scroll"+o(r)](n),this["scroll_offset_"+e]+=l)),v>=w&&(n=p-l,n>0&&(s["scroll"+o(r)](n),this["scroll_offset_"+e]-=l)),this},l.manage_scroll=function(t){this.scroll_in("x",t),this.scroll_in("y",t)},l.calculate_dimensions=function(t){this.window_height=s.height(),this.window_width=s.width()},l.drag_handler=function(e){e.target.nodeName;if(!this.disabled&&(1===e.which||n)&&!this.ignore_drag(e)){var i=this,s=!0;return this.$player=t(e.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(e),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$document.on(this.pointer_events.move,function(t){var e=i.get_mouse_pos(t),a=Math.abs(e.left-i.mouse_init_pos.left),n=Math.abs(e.top-i.mouse_init_pos.top);return a>i.options.distance||n>i.options.distance?s?(s=!1,i.on_dragstart.call(i,t),!1):(i.is_dragging===!0&&i.on_dragmove.call(i,t),!1):!1}),n?void 0:!1}},l.on_dragstart=function(e){if(e.preventDefault(),this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var i=this.$container.offset();return this.baseX=Math.round(i.left),this.baseY=Math.round(i.top),this.initial_container_width=this.options.container_width||this.$container.width(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.win_offset_y=t(window).scrollTop(),this.win_offset_x=t(window).scrollLeft(),this.scroll_offset_y=0,this.scroll_offset_x=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.set_limits(this.options.container_width),this.options.start&&this.options.start.call(this.$player,e,this.get_drag_data(e)),!1},l.on_dragmove=function(t){var e=this.get_drag_data(t);this.options.autoscroll&&this.manage_scroll(e),this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:e.position.left,top:e.position.top});var i=this.last_position||e.position;return e.prev_position=i,this.options.drag&&this.options.drag.call(this.$player,t,e),this.last_position=e.position,!1},l.on_dragstop=function(t){var e=this.get_drag_data(t);return this.drag_start=!1,this.options.stop&&this.options.stop.call(this.$player,t,e),this.helper&&this.options.remove_helper&&this.$helper.remove(),!1},l.on_select_start=function(t){return this.disabled||this.ignore_drag(t)?void 0:!1},l.enable=function(){this.disabled=!1},l.disable=function(){this.disabled=!0},l.destroy=function(){this.disable(),this.$container.off(this.ns),this.$document.off(this.ns),t(window).off(this.ns),t.removeData(this.$container,"drag")},l.ignore_drag=function(e){return this.options.handle?!t(e.target).is(this.options.handle):t.isFunction(this.options.ignore_dragging)?this.options.ignore_dragging(e):t(e.target).is(this.options.ignore_dragging.join(", "))},t.fn.drag=function(t){return new e(this,t)},e}),function(n,l){s=[i(1),r,o],a=l,d="function"==typeof a?a.apply(e,s):a,!(void 0!==d&&(t.exports=d))}(this,function(t,e,i){function s(e,i){this.options=t.extend(!0,{},a,i),this.$el=t(e),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w"),this.widgets=[],this.$changed=t([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.generated_stylesheets=[],this.$style_tags=t([]),this.options.auto_init&&this.init()}var a={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:1/0,min_rows:15,max_size_x:!1,autogrow_cols:!1,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,auto_init:!0,serialize_params:function(t,e){return{col:e.col,row:e.row,size_x:e.size_x,size_y:e.size_y}},collision:{},draggable:{items:".gs-w",distance:4,ignore_dragging:e.defaults.ignore_dragging.slice(0)},resize:{enabled:!1,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[1/0,1/0],min_size:[1,1]}};s.defaults=a,s.generated_stylesheets=[],s.sort_by_row_asc=function(e){return e=e.sort(function(e,i){return e.row||(e=t(e).coords().grid,i=t(i).coords().grid),e.row>i.row?1:-1})},s.sort_by_row_and_col_asc=function(t){return t=t.sort(function(t,e){return t.row>e.row||t.row===e.row&&t.col>e.col?1:-1})},s.sort_by_col_asc=function(t){return t=t.sort(function(t,e){return t.col>e.col?1:-1})},s.sort_by_row_desc=function(t){return t=t.sort(function(t,e){return t.row+t.size_y<e.row+e.size_y?1:-1})};var n=s.prototype;return n.init=function(){this.options.resize.enabled&&this.setup_resize(),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this.$wrapper.addClass("ready"),this.draggable(),this.options.resize.enabled&&this.resizable(),t(window).bind("resize.gridster",throttle(t.proxy(this.recalculate_faux_grid,this),200))},n.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},n.enable=function(){return this.drag_api.enable(),this},n.disable_resize=function(){return this.$el.addClass("gs-resize-disabled"),this.resize_api.disable(),this},n.enable_resize=function(){return this.$el.removeClass("gs-resize-disabled"),this.resize_api.enable(),this},n.add_widget=function(e,i,s,a,n,o,r){var d;i||(i=1),s||(s=1),!a&!n?d=this.next_position(i,s):(d={col:a,row:n,size_x:i,size_y:s},this.empty_cells(a,n,i,s));var l=t(e).attr({"data-col":d.col,"data-row":d.row,"data-sizex":i,"data-sizey":s}).addClass("gs-w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(l),this.register_widget(l),this.add_faux_rows(d.size_y),o&&this.set_widget_max_size(l,o),r&&this.set_widget_min_size(l,r),this.set_dom_grid_width(),this.set_dom_grid_height(),this.drag_api.set_limits(this.cols*this.min_widget_width),l.fadeIn()},n.set_widget_min_size=function(t,e){if(t="number"==typeof t?this.$widgets.eq(t):t,!t.length)return this;var i=t.data("coords").grid;return i.min_size_x=e[0],i.min_size_y=e[1],this},n.set_widget_max_size=function(t,e){if(t="number"==typeof t?this.$widgets.eq(t):t,!t.length)return this;var i=t.data("coords").grid;return i.max_size_x=e[0],i.max_size_y=e[1],this},n.add_resize_handle=function(e){var i=this.options.resize.handle_append_to;return t(this.resize_handle_tpl).appendTo(i?t(i,e):e),this},n.resize_widget=function(t,e,i,s){var a=t.coords().grid,n=a.col,o=this.options.max_cols,r=a.size_y,d=a.col,l=d;e||(e=a.size_x),i||(i=a.size_y),o!==1/0&&(e=Math.min(e,o-n+1)),i>r&&this.add_faux_rows(Math.max(i-r,0));var h=n+e-1;h>this.cols&&this.add_faux_cols(h-this.cols);var c={col:l,row:a.row,size_x:e,size_y:i};return this.mutate_widget_in_gridmap(t,a,c),this.set_dom_grid_height(),this.set_dom_grid_width(),s&&s.call(this,c.size_x,c.size_y),t},n.mutate_widget_in_gridmap=function(e,i,s){var a=(i.size_x,i.size_y),n=this.get_cells_occupied(i),o=this.get_cells_occupied(s),r=[];t.each(n.cols,function(e,i){-1===t.inArray(i,o.cols)&&r.push(i)});var d=[];t.each(o.cols,function(e,i){-1===t.inArray(i,n.cols)&&d.push(i)});var l=[];t.each(n.rows,function(e,i){-1===t.inArray(i,o.rows)&&l.push(i)});var h=[];if(t.each(o.rows,function(e,i){-1===t.inArray(i,n.rows)&&h.push(i)}),this.remove_from_gridmap(i),d.length){var c=[s.col,s.row,s.size_x,Math.min(a,s.size_y),e];this.empty_cells.apply(this,c)}if(h.length){var u=[s.col,s.row,s.size_x,s.size_y,e];this.empty_cells.apply(this,u)}if(i.col=s.col,i.row=s.row,i.size_x=s.size_x,i.size_y=s.size_y,this.add_to_gridmap(s,e),e.removeClass("player-revert"),e.data("coords").update({width:s.size_x*this.options.widget_base_dimensions[0]+(s.size_x-1)*this.options.widget_margins[0]*2,height:s.size_y*this.options.widget_base_dimensions[1]+(s.size_y-1)*this.options.widget_margins[1]*2}),e.attr({"data-col":s.col,"data-row":s.row,"data-sizex":s.size_x,"data-sizey":s.size_y}),r.length){var _=[r[0],s.row,r.length,Math.min(a,s.size_y),e];this.remove_empty_cells.apply(this,_)}if(l.length){var p=[s.col,s.row,s.size_x,s.size_y,e];this.remove_empty_cells.apply(this,p)}return this.move_widget_up(e),this},n.empty_cells=function(e,i,s,a,n){var o=this.widgets_below({col:e,row:i-a,size_x:s,size_y:a});return o.not(n).each(t.proxy(function(e,s){var n=t(s).coords().grid;if(n.row<=i+a-1){var o=i+a-n.row;this.move_widget_down(t(s),o)}},this)),this.set_dom_grid_height(),this},n.remove_empty_cells=function(e,i,s,a,n){var o=this.widgets_below({col:e,row:i,size_x:s,size_y:a});return o.not(n).each(t.proxy(function(e,i){this.move_widget_up(t(i),a)},this)),this.set_dom_grid_height(),this},n.next_position=function(t,e){t||(t=1),e||(e=1);for(var i,a=this.gridmap,n=a.length,o=[],r=1;n>r;r++){i=a[r].length;for(var d=1;i>=d;d++){var l=this.can_move_to({size_x:t,size_y:e},r,d);l&&o.push({col:r,row:d,size_y:e,size_x:t})}}return o.length?s.sort_by_row_and_col_asc(o)[0]:!1},n.remove_widget=function(e,i,s){var a=e instanceof t?e:t(e),n=a.coords().grid;t.isFunction(i)&&(s=i,i=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(a);var o=this.widgets_below(a);return this.remove_from_gridmap(n),a.fadeOut(t.proxy(function(){a.remove(),i||o.each(t.proxy(function(e,i){this.move_widget_up(t(i),n.size_y)},this)),this.set_dom_grid_height(),s&&s.call(this,e)},this)),this},n.remove_all_widgets=function(e){return this.$widgets.each(t.proxy(function(t,i){this.remove_widget(i,!0,e)},this)),this},n.serialize=function(e){return e||(e=this.$widgets),e.map(t.proxy(function(e,i){var s=t(i);return this.options.serialize_params(s,s.coords().grid)},this)).get()},n.serialize_changed=function(){return this.serialize(this.$changed)},n.dom_to_coords=function(t){return{col:parseInt(t.attr("data-col"),10),row:parseInt(t.attr("data-row"),10),size_x:parseInt(t.attr("data-sizex"),10)||1,size_y:parseInt(t.attr("data-sizey"),10)||1,max_size_x:parseInt(t.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(t.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(t.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(t.attr("data-min-sizey"),10)||!1,el:t}},n.register_widget=function(e){var i=e instanceof jQuery,s=i?this.dom_to_coords(e):e,a=!1;i||(e=s.el);var n=this.can_go_widget_up(s);return n&&(s.row=n,e.attr("data-row",n),this.$el.trigger("gridster:positionchanged",[s]),a=!0),this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:s.size_x,size_y:s.size_y},s.col,s.row)&&(t.extend(s,this.next_position(s.size_x,s.size_y)),e.attr({"data-col":s.col,"data-row":s.row,"data-sizex":s.size_x,"data-sizey":s.size_y}),a=!0),e.data("coords",e.coords()),e.data("coords").grid=s,this.add_to_gridmap(s,e),this.options.resize.enabled&&this.add_resize_handle(e),a},n.update_widget_position=function(t,e){return this.for_each_cell_occupied(t,function(t,i){return this.gridmap[t]?void(this.gridmap[t][i]=e):this}),this},n.remove_from_gridmap=function(t){return this.update_widget_position(t,!1)},n.add_to_gridmap=function(e,i){if(this.update_widget_position(e,i||e.el),e.el){var s=this.widgets_below(e.el);s.each(t.proxy(function(e,i){this.move_widget_up(t(i))},this))}},n.draggable=function(){var e=this,i=t.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width,limit:!0,start:function(i,s){e.$widgets.filter(".player-revert").removeClass("player-revert"),e.$player=t(this),e.$helper=t(s.$helper),e.helper=!e.$helper.is(e.$player),e.on_start_drag.call(e,i,s),e.$el.trigger("gridster:dragstart")},stop:function(t,i){e.on_stop_drag.call(e,t,i),e.$el.trigger("gridster:dragstop")},drag:throttle(function(t,i){e.on_drag.call(e,t,i),e.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.drag(i),this},n.resizable=function(){return this.resize_api=this.$el.drag({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,resize:!0,limit:this.options.autogrow_cols?!1:!0,start:t.proxy(this.on_start_resize,this),stop:t.proxy(function(e,i){delay(t.proxy(function(){this.on_stop_resize(e,i)},this),120)},this),drag:throttle(t.proxy(this.on_resize,this),60)}),this},n.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var e=this.options.resize.axes,i='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';return this.resize_handle_tpl=t.map(e,function(t){return i.replace("{type}",t)}).join(""),t.isArray(this.options.draggable.ignore_dragging)&&this.options.draggable.ignore_dragging.push("."+this.resize_handle_class),this},n.on_start_drag=function(e,i){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.highest_col=this.get_highest_occupied_cell().col,this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=t.extend({},this.player_grid_data),this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height),this.set_dom_grid_width(this.cols);var s=this.player_grid_data.size_x,a=this.cols-this.highest_col;this.options.autogrow_cols&&s>=a&&this.add_faux_cols(Math.min(s-a,1));var n=this.faux_grid,o=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(n,this.options.collision),this.$preview_holder=t("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:o.width,height:o.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,e,i)},n.on_drag=function(t,e){if(null===this.$player)return!1;var i={left:e.position.left+this.baseX,top:e.position.top+this.baseY};if(this.options.autogrow_cols){var s=this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1;s>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+1),this.drag_api.set_limits(this.container_width)),this.collision_api.set_colliders(this.faux_grid)}this.colliders_data=this.collision_api.get_closest_colliders(i),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:e.position.left,top:e.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,t,e)},n.on_stop_drag=function(t,e){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),e.position.left=e.position.left+this.baseX,e.position.top=e.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(e.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,t,e),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height(),this.set_dom_grid_width(),this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)},n.on_start_resize=function(e,i){this.$resized_widget=i.$player.closest(".gs-w"),this.resize_coords=this.$resized_widget.coords(),this.resize_wgd=this.resize_coords.grid,this.resize_initial_width=this.resize_coords.coords.width,this.resize_initial_height=this.resize_coords.coords.height,this.resize_initial_sizex=this.resize_coords.grid.size_x,this.resize_initial_sizey=this.resize_coords.grid.size_y,this.resize_initial_col=this.resize_coords.grid.col,this.resize_last_sizex=this.resize_initial_sizex,this.resize_last_sizey=this.resize_initial_sizey,this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1),this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1],this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1,this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1,this.resize_initial_last_col=this.get_highest_occupied_cell().col,this.set_dom_grid_width(this.cols),this.resize_dir={right:i.$player.is("."+this.resize_handle_class+"-x"),bottom:i.$player.is("."+this.resize_handle_class+"-y")},this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var s=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=t("<"+s+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el),this.$resized_widget.addClass("resizing"),this.options.resize.start&&this.options.resize.start.call(this,e,i,this.$resized_widget),this.$el.trigger("gridster:resizestart")},n.on_stop_resize=function(e,i){this.$resized_widget.removeClass("resizing").css({width:"",height:""}),delay(t.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""}),this.options.resize.stop&&this.options.resize.stop.call(this,e,i,this.$resized_widget),this.$el.trigger("gridster:resizestop")},this),300),this.set_dom_grid_width(),this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)},n.on_resize=function(t,e){var i,s=e.pointer.diff_left,a=e.pointer.diff_top,n=this.options.widget_base_dimensions[0],o=this.options.widget_base_dimensions[1],r=this.options.widget_margins[0],d=this.options.widget_margins[1],l=this.resize_max_size_x,h=this.resize_min_size_x,c=this.resize_max_size_y,u=this.resize_min_size_y,_=this.options.autogrow_cols,p=1/0,g=1/0,f=Math.ceil(s/(n+2*r)-.2),m=Math.ceil(a/(o+2*d)-.2),v=Math.max(1,this.resize_initial_sizex+f),w=Math.max(1,this.resize_initial_sizey+m),y=this.container_width/this.min_widget_width-this.resize_initial_col+1,b=y*this.min_widget_width-2*r;if(v=Math.max(Math.min(v,l),h),v=Math.min(y,v),i=l*n+(v-1)*r*2,p=Math.min(i,b),min_width=h*n+(v-1)*r*2,w=Math.max(Math.min(w,c),u),g=c*o+(w-1)*d*2,min_height=u*o+(w-1)*d*2,this.resize_dir.right?w=this.resize_initial_sizey:this.resize_dir.bottom&&(v=this.resize_initial_sizex),_){var x=this.resize_initial_col+v-1;_&&this.resize_initial_last_col<=x&&(this.set_dom_grid_width(Math.max(x+1,this.cols)),this.cols<x&&this.add_faux_cols(x-this.cols))}var z={};!this.resize_dir.bottom&&(z.width=Math.max(Math.min(this.resize_initial_width+s,p),min_width)),!this.resize_dir.right&&(z.height=Math.max(Math.min(this.resize_initial_height+a,g),min_height)),this.$resized_widget.css(z),(v!==this.resize_last_sizex||w!==this.resize_last_sizey)&&(this.resize_widget(this.$resized_widget,v,w),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":v,"data-sizey":w})),this.options.resize.resize&&this.options.resize.resize.call(this,t,e,this.$resized_widget),this.$el.trigger("gridster:resize"),this.resize_last_sizex=v,this.resize_last_sizey=w},n.on_overlapped_column_change=function(e,i){if(!this.colliders_data.length)return this;var s,a=this.get_targeted_columns(this.colliders_data[0].el.data.col),n=this.last_cols.length,o=a.length;for(s=0;o>s;s++)-1===t.inArray(a[s],this.last_cols)&&(e||t.noop).call(this,a[s]);for(s=0;n>s;s++)-1===t.inArray(this.last_cols[s],a)&&(i||t.noop).call(this,this.last_cols[s]);return this.last_cols=a,this},n.on_overlapped_row_change=function(e,i){if(!this.colliders_data.length)return this;var s,a=this.get_targeted_rows(this.colliders_data[0].el.data.row),n=this.last_rows.length,o=a.length;for(s=0;o>s;s++)-1===t.inArray(a[s],this.last_rows)&&(e||t.noop).call(this,a[s]);for(s=0;n>s;s++)-1===t.inArray(this.last_rows[s],a)&&(i||t.noop).call(this,this.last_rows[s]);this.last_rows=a},n.set_player=function(t,e,i){var s=this;i||this.empty_cells_player_occupies();var a=i?{col:t}:s.colliders_data[0].el.data,n=a.col,o=e||a.row;this.player_grid_data={col:n,row:o,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var r=this.get_widgets_overlapped(this.player_grid_data),d=this.widgets_constraints(r);if(this.manage_movements(d.can_go_up,n,o),this.manage_movements(d.can_not_go_up,n,o),!r.length){var l=this.can_go_player_up(this.player_grid_data);l!==!1&&(o=l),this.set_placeholder(n,o)}return{col:n,row:o}},n.widgets_constraints=function(e){var i,a=t([]),n=[],o=[];return e.each(t.proxy(function(e,i){var s=t(i),r=s.coords().grid;this.can_go_widget_up(r)?(a=a.add(s),n.push(r)):o.push(r)},this)),i=e.not(a),{can_go_up:s.sort_by_row_asc(n),can_not_go_up:s.sort_by_row_desc(o)}},n.manage_movements=function(e,i,s){return t.each(e,t.proxy(function(t,e){var a=e,n=a.el,o=this.can_go_widget_up(a);if(o)this.move_widget_to(n,o),this.set_placeholder(i,o+a.size_y);else{var r=this.can_go_player_up(this.player_grid_data);if(!r){var d=s+this.player_grid_data.size_y-a.row;this.move_widget_down(n,d),this.set_placeholder(i,s)}}},this)),this},n.is_player=function(t,e){if(e&&!this.gridmap[t])return!1;var i=e?this.gridmap[t][e]:t;return i&&(i.is(this.$player)||i.is(this.$helper))},n.is_player_in=function(e,i){var s=this.cells_occupied_by_player||{};return t.inArray(e,s.cols)>=0&&t.inArray(i,s.rows)>=0},n.is_placeholder_in=function(e,i){var s=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(e)&&t.inArray(i,s.rows)>=0},n.is_placeholder_in_col=function(e){var i=this.cells_occupied_by_placeholder||[];return t.inArray(e,i.cols)>=0},n.is_empty=function(t,e){return"undefined"!=typeof this.gridmap[t]?"undefined"!=typeof this.gridmap[t][e]&&this.gridmap[t][e]===!1?!0:!1:!0},n.is_occupied=function(t,e){return this.gridmap[t]&&this.gridmap[t][e]?!0:!1},n.is_widget=function(t,e){var i=this.gridmap[t];return i?(i=i[e],i?i:!1):!1},n.is_widget_under_player=function(t,e){return this.is_widget(t,e)?this.is_player_in(t,e):!1},n.get_widgets_under_player=function(e){e||(e=this.cells_occupied_by_player||{cols:[],rows:[]});var i=t([]);return t.each(e.cols,t.proxy(function(s,a){t.each(e.rows,t.proxy(function(t,e){this.is_widget(a,e)&&(i=i.add(this.gridmap[a][e]))},this))},this)),i},n.set_placeholder=function(e,i){var s=t.extend({},this.placeholder_grid_data),a=this.widgets_below({col:s.col,row:s.row,size_y:s.size_y,size_x:s.size_x}),n=e+s.size_x-1;n>this.cols&&(e-=n-e);var o=this.placeholder_grid_data.row<i,r=this.placeholder_grid_data.col!==e;this.placeholder_grid_data.col=e,this.placeholder_grid_data.row=i,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":i,"data-col":e}),(o||r)&&a.each(t.proxy(function(i,a){this.move_widget_up(t(a),this.placeholder_grid_data.col-e+s.size_y)},this));var d=this.get_widgets_under_player(this.cells_occupied_by_placeholder);d.length&&d.each(t.proxy(function(e,a){var n=t(a);this.move_widget_down(n,i+s.size_y-n.data("coords").grid.row)},this))},n.can_go_player_up=function(t){var e=t.row+t.size_y-1,i=!0,s=[],a=1e4,n=this.get_widgets_under_player();return this.for_each_column_occupied(t,function(t){var o=this.gridmap[t],r=e+1;for(s[t]=[];--r>0&&(this.is_empty(t,r)||this.is_player(t,r)||this.is_widget(t,r)&&o[r].is(n));)s[t].push(r),
a=a>r?r:a;return 0===s[t].length?(i=!1,!0):void s[t].sort(function(t,e){return t-e})}),i?this.get_valid_rows(t,s,a):!1},n.can_go_widget_up=function(t){var e=t.row+t.size_y-1,i=!0,s=[],a=1e4;return this.for_each_column_occupied(t,function(n){var o=this.gridmap[n];s[n]=[];for(var r=e+1;--r>0&&(!this.is_widget(n,r)||this.is_player_in(n,r)||o[r].is(t.el));)this.is_player(n,r)||this.is_placeholder_in(n,r)||this.is_player_in(n,r)||s[n].push(r),a>r&&(a=r);return 0===s[n].length?(i=!1,!0):void s[n].sort(function(t,e){return t-e})}),i?this.get_valid_rows(t,s,a):!1},n.get_valid_rows=function(e,i,s){for(var a=e.row,n=e.row+e.size_y-1,o=e.size_y,r=s-1,d=[];++r<=n;){var l=!0;if(t.each(i,function(e,i){t.isArray(i)&&-1===t.inArray(r,i)&&(l=!1)}),l===!0&&(d.push(r),d.length===o))break}var h=!1;return 1===o?d[0]!==a&&(h=d[0]||!1):d[0]!==a&&(h=this.get_consecutive_numbers_index(d,o)),h},n.get_consecutive_numbers_index=function(t,e){for(var i=t.length,s=[],a=!0,n=-1,o=0;i>o;o++){if(a||t[o]===n+1){if(s.push(o),s.length===e)break;a=!1}else s=[],a=!0;n=t[o]}return s.length>=e?t[s[0]]:!1},n.get_widgets_overlapped=function(){var e=t([]),i=[],s=this.cells_occupied_by_player.rows.slice(0);return s.reverse(),t.each(this.cells_occupied_by_player.cols,t.proxy(function(a,n){t.each(s,t.proxy(function(s,a){if(!this.gridmap[n])return!0;var o=this.gridmap[n][a];this.is_occupied(n,a)&&!this.is_player(o)&&-1===t.inArray(o,i)&&(e=e.add(o),i.push(o))},this))},this)),e},n.on_start_overlapping_column=function(t){this.set_player(t,!1)},n.on_start_overlapping_row=function(t){this.set_player(!1,t)},n.on_stop_overlapping_column=function(t){this.set_player(t,!1);var e=this;this.for_each_widget_below(t,this.cells_occupied_by_player.rows[0],function(t,i){e.move_widget_up(this,e.player_grid_data.size_y)})},n.on_stop_overlapping_row=function(t){this.set_player(!1,t);for(var e=this,i=this.cells_occupied_by_player.cols,s=0,a=i.length;a>s;s++)this.for_each_widget_below(i[s],t,function(t,i){e.move_widget_up(this,e.player_grid_data.size_y)})},n.move_widget_to=function(e,i){var s=this,a=e.coords().grid,n=(i-a.row,this.widgets_below(e)),o=this.can_move_to(a,a.col,i,e);return o===!1?!1:(this.remove_from_gridmap(a),a.row=i,this.add_to_gridmap(a),e.attr("data-row",i),this.$changed=this.$changed.add(e),n.each(function(e,i){var a=t(i),n=a.coords().grid,o=s.can_go_widget_up(n);o&&o!==n.row&&s.move_widget_to(a,o)}),this)},n.move_widget_up=function(e,i){var s=e.coords().grid,a=s.row,n=[];return i||(i=1),this.can_go_up(e)?void this.for_each_column_occupied(s,function(s){if(-1===t.inArray(e,n)){var o=e.coords().grid,r=a-i;if(r=this.can_go_up_to_row(o,s,r),!r)return!0;var d=this.widgets_below(e);this.remove_from_gridmap(o),o.row=r,this.add_to_gridmap(o),e.attr("data-row",o.row),this.$changed=this.$changed.add(e),n.push(e),d.each(t.proxy(function(e,s){this.move_widget_up(t(s),i)},this))}}):!1},n.move_widget_down=function(e,i){var s,a,n,o;if(0>=i)return!1;if(s=e.coords().grid,a=s.row,n=[],o=i,!e)return!1;if(-1===t.inArray(e,n)){var r=e.coords().grid,d=a+i,l=this.widgets_below(e);this.remove_from_gridmap(r),l.each(t.proxy(function(e,i){var s=t(i),a=s.coords().grid,n=this.displacement_diff(a,r,o);n>0&&this.move_widget_down(s,n)},this)),r.row=d,this.update_widget_position(r,e),e.attr("data-row",r.row),this.$changed=this.$changed.add(e),n.push(e)}},n.can_go_up_to_row=function(e,i,s){var a,n=this.gridmap,o=!0,r=[],d=e.row;if(this.for_each_column_occupied(e,function(t){n[t];for(r[t]=[],a=d;a--&&this.is_empty(t,a)&&!this.is_placeholder_in(t,a);)r[t].push(a);return r[t].length?void 0:(o=!1,!0)}),!o)return!1;for(a=s,a=1;d>a;a++){for(var l=!0,h=0,c=r.length;c>h;h++)r[h]&&-1===t.inArray(a,r[h])&&(l=!1);if(l===!0){o=a;break}}return o},n.displacement_diff=function(t,e,i){var s=t.row,a=[],n=e.row+e.size_y;this.for_each_column_occupied(t,function(t){for(var e=0,i=n;s>i;i++)this.is_empty(t,i)&&(e+=1);a.push(e)});var o=Math.max.apply(Math,a);return i-=o,i>0?i:0},n.widgets_below=function(e){var i=t.isPlainObject(e)?e:e.coords().grid,a=this,n=(this.gridmap,i.row+i.size_y-1),o=t([]);return this.for_each_column_occupied(i,function(e){a.for_each_widget_below(e,n,function(e,i){return a.is_player(this)||-1!==t.inArray(this,o)?void 0:(o=o.add(this),!0)})}),s.sort_by_row_asc(o)},n.set_cells_player_occupies=function(t,e){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=e,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},n.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},n.can_go_up=function(t){var e=t.coords().grid,i=e.row,s=i-1,a=(this.gridmap,!0);return 1===i?!1:(this.for_each_column_occupied(e,function(t){this.is_widget(t,s);return this.is_occupied(t,s)||this.is_player(t,s)||this.is_placeholder_in(t,s)||this.is_player_in(t,s)?(a=!1,!0):void 0}),a)},n.can_move_to=function(t,e,i,s){var a=(this.gridmap,t.el),n={size_y:t.size_y,size_x:t.size_x,col:e,row:i},o=!0,r=e+t.size_x-1;return r>this.cols?!1:s&&s<i+t.size_y-1?!1:(this.for_each_cell_occupied(n,function(e,i){var s=this.is_widget(e,i);!s||t.el&&!s.is(a)||(o=!1)}),o)},n.get_targeted_columns=function(t){for(var e=(t||this.player_grid_data.col)+(this.player_grid_data.size_x-1),i=[],s=t;e>=s;s++)i.push(s);return i},n.get_targeted_rows=function(t){for(var e=(t||this.player_grid_data.row)+(this.player_grid_data.size_y-1),i=[],s=t;e>=s;s++)i.push(s);return i},n.get_cells_occupied=function(e){var i,s={cols:[],rows:[]};for(arguments[1]instanceof t&&(e=arguments[1].coords().grid),i=0;i<e.size_x;i++){var a=e.col+i;s.cols.push(a)}for(i=0;i<e.size_y;i++){var n=e.row+i;s.rows.push(n)}return s},n.for_each_cell_occupied=function(t,e){return this.for_each_column_occupied(t,function(i){this.for_each_row_occupied(t,function(t){e.call(this,i,t)})}),this},n.for_each_column_occupied=function(t,e){for(var i=0;i<t.size_x;i++){var s=t.col+i;e.call(this,s,t)}},n.for_each_row_occupied=function(t,e){for(var i=0;i<t.size_y;i++){var s=t.row+i;e.call(this,s,t)}},n._traversing_widgets=function(e,i,s,a,n){var o=this.gridmap;if(o[s]){var r,d,l=e+"/"+i;if(arguments[2]instanceof t){var h=arguments[2].coords().grid;s=h.col,a=h.row,n=arguments[3]}var c=[],u=a,_={"for_each/above":function(){for(;u--&&!(u>0&&this.is_widget(s,u)&&-1===t.inArray(o[s][u],c)&&(r=n.call(o[s][u],s,u),c.push(o[s][u]),r)););},"for_each/below":function(){for(u=a+1,d=o[s].length;d>u&&(!this.is_widget(s,u)||-1!==t.inArray(o[s][u],c)||(r=n.call(o[s][u],s,u),c.push(o[s][u]),!r));u++);}};_[l]&&_[l].call(this)}},n.for_each_widget_above=function(t,e,i){return this._traversing_widgets("for_each","above",t,e,i),this},n.for_each_widget_below=function(t,e,i){return this._traversing_widgets("for_each","below",t,e,i),this},n.get_highest_occupied_cell=function(){for(var t,e=this.gridmap,i=e[1].length,s=[],a=[],n=e.length-1;n>=1;n--)for(t=i-1;t>=1;t--)if(this.is_widget(n,t)){s.push(t),a.push(n);break}return{col:Math.max.apply(Math,a),row:Math.max.apply(Math,s)}},n.get_widgets_from=function(e,i){var s=(this.gridmap,t());return e&&(s=s.add(this.$widgets.filter(function(){var i=t(this).attr("data-col");return i===e||i>e}))),i&&(s=s.add(this.$widgets.filter(function(){var e=t(this).attr("data-row");return e===i||e>i}))),s},n.set_dom_grid_height=function(t){if("undefined"==typeof t){var e=this.get_highest_occupied_cell().row;t=e*this.min_widget_height}return this.container_height=t,this.$el.css("height",this.container_height),this},n.set_dom_grid_width=function(t){"undefined"==typeof t&&(t=this.get_highest_occupied_cell().col);var e=this.options.autogrow_cols?this.options.max_cols:this.cols;return t=Math.min(e,Math.max(t,this.options.min_cols)),this.container_width=t*this.min_widget_width,this.$el.css("width",this.container_width),this},n.generate_stylesheet=function(e){var i,a="",n=this.options.max_size_x||this.cols;e||(e={}),e.cols||(e.cols=this.cols),e.rows||(e.rows=this.rows),e.namespace||(e.namespace=this.options.namespace),e.widget_base_dimensions||(e.widget_base_dimensions=this.options.widget_base_dimensions),e.widget_margins||(e.widget_margins=this.options.widget_margins),e.min_widget_width=2*e.widget_margins[0]+e.widget_base_dimensions[0],e.min_widget_height=2*e.widget_margins[1]+e.widget_base_dimensions[1];var o=t.param(e);if(t.inArray(o,s.generated_stylesheets)>=0)return!1;for(this.generated_stylesheets.push(o),s.generated_stylesheets.push(o),i=e.cols;i>=0;i--)a+=e.namespace+' [data-col="'+(i+1)+'"] { left:'+(i*e.widget_base_dimensions[0]+i*e.widget_margins[0]+(i+1)*e.widget_margins[0])+"px; }\n";for(i=e.rows;i>=0;i--)a+=e.namespace+' [data-row="'+(i+1)+'"] { top:'+(i*e.widget_base_dimensions[1]+i*e.widget_margins[1]+(i+1)*e.widget_margins[1])+"px; }\n";for(var r=1;r<=e.rows;r++)a+=e.namespace+' [data-sizey="'+r+'"] { height:'+(r*e.widget_base_dimensions[1]+(r-1)*(2*e.widget_margins[1]))+"px; }\n";for(var d=1;n>=d;d++)a+=e.namespace+' [data-sizex="'+d+'"] { width:'+(d*e.widget_base_dimensions[0]+(d-1)*(2*e.widget_margins[0]))+"px; }\n";return this.remove_style_tags(),this.add_style_tag(a)},n.add_style_tag=function(t){var e=document,i=e.createElement("style");return e.getElementsByTagName("head")[0].appendChild(i),i.setAttribute("type","text/css"),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),this.$style_tags=this.$style_tags.add(i),this},n.remove_style_tags=function(){var e=s.generated_stylesheets,i=this.generated_stylesheets;this.$style_tags.remove(),s.generated_stylesheets=t.map(e,function(e){return-1===t.inArray(e,i)?e:void 0})},n.generate_faux_grid=function(t,e){this.faux_grid=[],this.gridmap=[];var i,s;for(i=e;i>0;i--)for(this.gridmap[i]=[],s=t;s>0;s--)this.add_faux_cell(s,i);return this},n.add_faux_cell=function(e,i){var s=t({left:this.baseX+(i-1)*this.min_widget_width,top:this.baseY+(e-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:i,row:e,original_col:i,original_row:e}).coords();return t.isArray(this.gridmap[i])||(this.gridmap[i]=[]),this.gridmap[i][e]=!1,this.faux_grid.push(s),this},n.add_faux_rows=function(t){for(var e=this.rows,i=e+(t||1),s=i;s>e;s--)for(var a=this.cols;a>=1;a--)this.add_faux_cell(s,a);return this.rows=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},n.add_faux_cols=function(t){var e=this.cols,i=e+(t||1);i=Math.min(i,this.options.max_cols);for(var s=e+1;i>=s;s++)for(var a=this.rows;a>=1;a--)this.add_faux_cell(a,s);return this.cols=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},n.recalculate_faux_grid=function(){var e=this.$wrapper.width();return this.baseX=(t(window).width()-e)/2,this.baseY=this.$wrapper.offset().top,t.each(this.faux_grid,t.proxy(function(t,e){this.faux_grid[t]=e.update({left:this.baseX+(e.data.col-1)*this.min_widget_width,top:this.baseY+(e.data.row-1)*this.min_widget_height})},this)),this},n.get_widgets_from_DOM=function(){var e=this.$widgets.map(t.proxy(function(e,i){var s=t(i);return this.dom_to_coords(s)},this));e=s.sort_by_row_and_col_asc(e);var i=t(e).map(t.proxy(function(t,e){return this.register_widget(e)||null},this));return i.length&&this.$el.trigger("gridster:positionschanged"),this},n.generate_grid_and_stylesheet=function(){var e=this.$wrapper.width(),i=this.options.max_cols,s=Math.floor(e/this.min_widget_width)+this.options.extra_cols,a=this.$widgets.map(function(){return t(this).attr("data-col")}).get();a.length||(a=[0]);var n=Math.max.apply(Math,a);this.cols=Math.max(n,s,this.options.min_cols),i!==1/0&&i>=n&&i<this.cols&&(this.cols=i);var o=this.options.extra_rows;return this.$widgets.each(function(e,i){o+=+t(i).attr("data-sizey")}),this.rows=Math.max(o,this.options.min_rows),this.baseX=(t(window).width()-e)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},n.destroy=function(e){return this.$el.removeData("gridster"),t(window).unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.remove_style_tags(),e&&this.$el.remove(),this},t.fn.gridster=function(e){return this.each(function(){t(this).data("gridster")||t(this).data("gridster",new s(this,e))})},s}),function(a,n){s=[i(1)],d=function(t){return n(t,window,document)}.apply(e,s),!(void 0!==d&&(t.exports=d))}(this,function(t,e,i,s){"use strict";function a(e){return t(e).length>0}function n(e,i,s){var a=t.extend(!0,{},i,{success:function(e,i,a){t.isFunction(s)&&s(e,i,a)}});t.isFunction(v.ajax)?v.ajax(e,a):t.isFunction(t.ajax)?t.ajax(a):console.error("未找到ajax方法定义，加载新建菜单失败")}function o(t,e){return e.templates.box(t)}function r(t,e,i,s){var n=s.selector,o=t.children(n.content),r=t.children(n.heading),d=t.closest(n.column).data("gridster");return a(t)&&a(o)&&a(r)&&a(d)?void d.resize_widget(t,e,i,function(t,e){o.height(function(){var t=d.min_widget_height*e-2*d.options.widget_margins[1]-r.outerHeight(!0)-o.outerHeight(!0)+o.height();return t})}):!1}function d(t,e){var i=e.selector,s=t.children(i.content),n=t.children(i.heading);if(!a(t)||!a(s)||!a(n))return!1;var o,d,l=t.data("size")||"original",h=t.data("slide")||"down";switch(h){case"down":case"DOWN":switch(l){case"original":case"ORIGINAL":o=t.data("orgSizex")||t.data("sizex");break;case"max":case"MAX":o=t.data("maxSizex")||t.data("sizex");break;default:return!1}r(t,o,1,e),t.data("slide","up");break;case"up":case"UP":switch(l){case"original":case"ORIGINAL":o=t.data("orgSizex")||t.data("sizex"),d=t.data("orgSizey")||t.data("sizey");break;case"max":case"MAX":o=t.data("maxSizex")||t.data("sizex"),d=t.data("maxSizey")||t.data("sizey");break;default:return!1}r(t,o,d,e),t.data("slide","down");break;default:return!1}return s.slideToggle(e.slideSpeed),!0}function l(e,i){if(!a(e))return!1;var s,n=i.selector,o=(e.find(n.resize),e.data("briefUrl")||""),r=e.data("detailUrl")||"",d=e.children(n.content),l=e.data("size")||"original";switch(l){case"original":case"ORIGINAL":s=o||"";break;case"max":case"MAX":s=r||"";break;default:return!1}return s&&d.children().fadeOut(i.fadeSpeed,function(){i.getData(s,i.ajax,function(e,s,a){d.empty().append(e),t.isFunction(i.onContendLoaded)&&i.onContendLoaded(d)})}),!0}function h(t,e,i,s){var a=s||o(e,i),n=i.sizeScaler,d=[e.size[0]*n[0],e.size[1]*n[1]],h=e.position,c=[e.maxSize[0]*n[0],e.maxSize[1]*n[1]],u=t.add_widget(a,d[0],d[1],h[0],h[1]);return u.data("maxSizex",c[0]).data("maxSizey",c[1]),r(u,u.data("sizex"),u.data("sizey"),i),l(u,i),u}function c(e,i,s,n){return a(i)&&a(e)?(e.remove_widget(i,s,function(){t.isFunction(n)&&n(e)}),!0):!1}function u(e,i){return e.remove_all_widgets(function(){t.isFunction(i)&&i(e)}),!0}function _(t){return!t.drag_api.disabled}function p(t){return t.disable(),!0}function g(t){return t.enable(),!0}function f(t,e){var i,s,a=t,n=e.selector,o=e.icons,d=a.children("i"),h=a.closest(n.box),c=(a.siblings(n.title).html(),h.data("size")||"original"),u=h.data("slide")||"down";switch(c){case"original":case"ORIGINAL":switch(h.data("orgSizex",h.data("sizex")).data("orgSizey",h.data("sizey")),i=h.data("maxSizex")||h.data("sizex"),u){case"up":case"UP":s=1;break;case"down":case"DOWN":s=h.data("maxSizey")||h.data("sizey");break;default:return!1}h.data("size","max");break;case"max":case"MAX":switch(i=h.data("orgSizex")||h.data("sizex"),u){case"up":case"UP":s=1;break;case"down":case"DOWN":s=h.data("orgSizey")||h.data("sizey");break;default:return!1}h.data("size","original");break;default:return!1}d.toggleClass(o.resize[0]).toggleClass(o.resize[1]),r(h,i,s,e),l(h,e)}function m(e,i){var s=i.selector,n=i.icons;return a(s.column,e)?(e.on("uc:initDragboxes",function(){t(this).find(s.box).each(function(){var e=t(this);r(e,e.data("sizex"),e.data("sizey"),i),l(e,i)})}),e.on("click",s.refresh,function(){l(t(this).closest(s.box),i),t.isFunction(i.onBoxRefreshed)&&i.onBoxRefreshed(t(this).closest(s.box))}),e.on("click",s.resize,function(){f(t(this),i),t.isFunction(i.onBoxResized)&&i.onBoxResized(t(this).closest(s.box))}),e.on("click",s.toggle,function(){var e=t(this).children("i");e.toggleClass(n.toggle[0]).toggleClass(n.toggle[1]),d(t(this).closest(s.box),i)}),e.on("click",s.remove,function(){var e=t(this).closest(s.box),a=e.closest(s.column).data("gridster");c(a,e,i.silent),t.isFunction(i.onBoxRemoved)&&i.onBoxRemoved(a)}),!0):!1}if(!t)return{};var v=e.udesk=e.udesk||{},w="udeskDragbox",y="3.0.0-Beta1",b={namespace:"",widget_selector:".dragbox",draggable:{handle:".dragbox-heading"},selector:{column:".dragbox-column",box:".dragbox",heading:".dragbox-heading",title:"h4",content:".dragbox-content","drag-handle":".dragbox-heading",refresh:".refresh-box",resize:".maximize-box",toggle:".toggle-box",remove:".remove-box"},max_cols:28,widget_base_dimensions:[40,40],widget_margins:[3,3],resize:{enabled:!1,max_size:[3,3],min_size:[1,1]},sizeScaler:[4,4],icons:{resize:["fa fa-expand","fa fa-compress"],toggle:["fa fa-minus","fa fa-plus"]},ajax:{},getData:n,newBox:{id:"newDragbox",position:[1,1],size:[1,1],maxSize:[4,3],briefUrl:s,detailUrl:s,title:"Title",content:"<p> Lorem ipsum dolor sit amet, consectetuer adipiscing elit </p>"},templates:{column:v.template?v.template('<div class="dragbox-column"></div>'):s,box:v.template?v.template('<div class="dragbox" id="{{=it.id}}" data-brief-url="{{=it.briefUrl}}" data-detail-url ="{{=it.detailUrl}}"><div class="dragbox-heading"><h4>{{=it.title}}</h4><a class="remove-box"><i class="menu-icon fa fa-remove"></i></a><a class="toggle-box"><i class="menu-icon fa fa-minus"></i></a><a class="maximize-box"><i class="menu-icon fa fa-expand"></i></a><a class="refresh-box"><i class="menu-icon fa fa-refresh"></i></a></div><div class="dragbox-content" >{{=it.content}}</div></div>'):s},fadeSpeed:500,slideSpeed:200,silent:!1,onInit:function(t){},onContendLoaded:function(t){},onBoxAdded:function(t){},onBoxRemoved:function(t){},onAllRemoved:function(t){},onAllFixed:function(t){},onAllUnfixed:function(t){},onBoxResized:function(t){},onBoxRefreshed:function(t){}},x=function(t,e){return this.$element=t,this.options=e,this.init(),this};t.extend(x.prototype,{constructor:x,VERSION:y,init:function(){var e=this.options,i=e.selector.column,s=this.$element,a=s.children(i)||s.append(e.templates.column(e)).children(i);return this.gridster=a.gridster(e).data("gridster"),m(s,e),s.trigger("uc:initDragboxes"),t.isFunction(e.onInit)&&e.onInit(this.gridster),this},addBox:function(e,i){var s,a=this.options,n=t.extend(!0,{},a.newBox,e);return s="Function"==typeof i?h(this.gridster,n,a,i(e)):h(this.gridster,n,a),t.isFunction(a.onBoxAdded)&&a.onBoxAdded(s),this},removeBox:function(e,i,s){return c(this.gridster,e,i,s),t.isFunction(this.options.onBoxRemoved)&&this.options.onBoxRemoved(this.gridster),this},removeAll:function(e){return u(this.gridster,e),t.isFunction(this.options.onAllRemoved)&&this.options.onAllRemoved(this.gridster),this},refrshBox:function(e,i){var s=this.options;l(e,s),t.isFunction(i)&&i(),t.isFunction(s.onBoxRefreshed)&&s.onBoxRefreshed(t(this).closest(selector.box))},isDraggable:function(){return _(this.gridster)},fixAll:function(){return p(this.gridster),t.isFunction(this.options.onAllFixed)&&this.options.onAllFixed(this.gridster),this},unfixAll:function(){return g(this.gridster),t.isFunction(this.options.onAllUnfixed)&&this.options.onAllUnfixed(this.gridster),this}}),t.fn[w]=function(e){var i=t.extend(!0,{},t.fn[w].defaults,e);return this.each(function(){var e=t(this);t(this).data(w)||e.data(w,new t.fn[w].constructor(e,i))})},t.fn[w].defaults=b,t.fn[w].constructor=x})},function(t,e,i){var s,a;!function(n){s=[i(1)],a=function(t){return n(t,window,document)}.apply(e,s),!(void 0!==a&&(t.exports=a))}(function(t,e,i,s){"use strict";if(!t)return{};var a=(e.udesk=e.udesk||{},"udeskLoadingMask"),n="1.0.0-Beta1",o={color:"#FFFFFF",template:'<div class="u-loadingmask"><a class="u-loadingimg"></a></div>',fadeSpeed:500,onInit:function(t){},onMaskAdded:function(t){},onMaskRemoved:function(t){}},r=function(t,e){return this.$element=t,this.options=e,this.init(),this};t.extend(r.prototype,{constructor:r,VERSION:n,$mask:s,init:function(){var e=this.options,i=t(e.template);return i.css({"background-color":e.color,"z-index":"1000"}),this.$mask=i,t.isFunction(this.options.onInit)&&this.options.onInit(this.$mask),this.addMask(),this},addMask:function(){var e=this.$element;return e.css({position:"relative"}),this.$mask.prependTo(e),t.isFunction(this.options.onMaskAdded)&&this.options.onMaskAdded(this.$mask),this},removeMask:function(){var e=this.options,i=this.$mask;return i.fadeOut(e.fadeSpeed,function(){i.remove()}),t.isFunction(e.onMaskRemoved)&&e.onMaskRemoved(this.$element),this}}),t.fn[a]=function(e){var i=t.extend(!0,{},t.fn[a].defaults,e);return this.each(function(){var e=t(this);t(this).data(a)||e.data(a,new t.fn[a].constructor(e,i))})},t.fn[a].defaults=o,t.fn[a].constructor=r})},function(t,e,i){var s,a;!function(n){s=[i(1)],a=function(t){return n(t,window,document)}.apply(e,s),!(void 0!==a&&(t.exports=a))}(function(t,e,i,s){"use strict";function a(e){var i=e,s=i.$dialog;s.on("show.bs.modal",function(){t.isFunction(i.onShow)&&i.options.onShow(s)}),s.on("shown.bs.modal",function(){t.isFunction(i.onShown)&&i.onShown(s)}),s.on("hide.bs.modal",function(){t.isFunction(i.onHide)&&i.onHide(s)}),s.on("hidden.bs.modal",function(){t.isFunction(i.onHidden)&&i.options.onHidden(s),i.options.emptyOnHidden&&i.$wrapper.empty()})}var n="udeskModal",o="3.0.0-Beta1",r={wrapper:'<div class="udeskModal"></div>',backdrop:!0,keyboard:!0,show:!1,remote:!1,emptyOnHidden:!0,onInit:function(t){},onShow:function(t){},onShown:function(t){},onHide:function(t){},onHidden:function(t){},templates:[{type:"success",template:'<div class="modal fade success-modal" tabindex="-1" role="dialog" aria-labelledby="udeskModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="udeskModalLabel"><b>成功</b></h4></div><div class="modal-body">#if(message){# #=message# #}##if(detail){# </br><div id="detail" class="collapse out">#= detail #</div> #}# </div><div class="modal-footer">#if(detail){#  <button type="button" class="btn btn-theme"  data-toggle="collapse" data-target="\\#detail">更多</button> #}#<button type="button" class="btn" data-dismiss="modal">关闭</button></div></div></div></div>'},{type:"warn",template:'<div class="modal fade success-modal" tabindex="-1" role="dialog" aria-labelledby="udeskModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="udeskModalLabel"><b>警告</b></h4></div><div class="modal-body">#if(message){# #=message# #}##if(detail){# </br><div id="detail" class="collapse out">#= detail #</div> #}# </div><div class="modal-footer">#if(detail){#  <button type="button" class="btn btn-theme"  data-toggle="collapse" data-target="\\#detail">更多</button> #}#<button type="button" class="btn" data-dismiss="modal">关闭</button></div></div></div></div>'},{type:"error",template:'<div class="modal fade error-modal" tabindex="-1" role="dialog" aria-labelledby="udeskModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="udeskModalLabel"><b>错误</b></h4></div><div class="modal-body">#if(message){# #=message# #}##if(detail){# </br><div id="detail" class="collapse out">#= detail #</div> #}# </div><div class="modal-footer">#if(detail){#  <button type="button" class="btn btn-theme"  data-toggle="collapse" data-target="\\#detail">更多</button> #}#<button type="button" class="btn" data-dismiss="modal">关闭</button></div></div></div></div>'},{type:"default",template:'<div class="modal fade error-modal" tabindex="-1" role="dialog" aria-labelledby="udeskModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="udeskModalLabel"><b>通知</b></h4></div><div class="modal-body">#if(message){# #=message# #}##if(detail){# </br><div id="detail" class="collapse out">#= detail #</div> #}# </div><div class="modal-footer">#if(detail){#  <button type="button" class="btn btn-theme"  data-toggle="collapse" data-target="\\#detail">更多</button> #}#<button type="button" class="btn" data-dismiss="modal">关闭</button></div></div></div></div>'}]},d=function(t,e){return this.$element=t,this.options=e,this.init(),this};t.extend(d.prototype,{constructor:d,VERSION:o,$wrapper:s,$dialog:s,init:function(){var e=this.options;return this.$wrapper=t(e.wrapper).appendTo(this.$element),t.isFunction(this.onInit)&&this.onInit(this),this},show:function(t,e){var i=this.options,n=i.templates,o=s;for(var r in n)if(n[r].type==e){o=kendo.template(n[r].template)(t);break}return s==o&&(o=kendo.template(n[n.length-1].template)(t)),this.$dialog=this.$wrapper.append(o).children().last(),this.$dialog.modal(i).modal("show"),a(this),this},hide:function(){return this.dialog&&this.dialog.modal("hide"),this},toggle:function(){return this.dialog&&this.dialog.modal("toggle"),this}}),t.fn[n]=function(e){var i=t.extend(!0,{},t.fn[n].defaults,e);return this.each(function(){var e=t(this);t(this).data(n)||e.data(n,new t.fn[n].constructor(e,i))})},t.fn[n].defaults=r,t.fn[n].constructor=d})},function(t,e,i){var s,a;!function(n){s=[i(1)],a=function(t){return n(t,window,document)}.apply(e,s),!(void 0!==a&&(t.exports=a))}(function(t,e,i,s){"use strict";function a(e,i){return t.isFunction(i)?i(e):(d.error("菜单项模板方法错误"),s)}function n(t,e,i){var o,r,d=[];for(o=0;o<t.length;o++){var l=i?[]:s;r={text:a(t[o],e.templates.itemText),encoded:!1,items:t[o].items?n(t[o].items,e):l},d.push(r)}return d}function o(e,i,s){var a=t.extend(!0,{},i,{success:function(e,i,a){t.isFunction(s)&&s(e,i,a)}});t.isFunction(d.ajax)?d.ajax(e,a):t.isFunction(t.ajax)?t.ajax(a):console.error("未找到ajax方法定义，加载新建菜单失败")}function r(e){var i=e,s=i.options;return i.$element.on("click","span.k-link a",function(){t.isFunction(s.onClick)&&s.onClick(t(this))}),i.$element.on("hover","span.k-link a",function(){t.isFunction(s.onHover)&&s.onHover(t(this))}),i}var d=e.udesk=e.udesk||{},l="udeskNewMenu",h="1.0.0-Beta1",c={localData:s,openOnClick:!0,url:"",ajax:{},getData:o,templates:{itemText:d.template?d.template('<a data-sys-id="#=data[i].sysId#" data-submenu-url="{{=it.submenuUrl}}" data-tab-url="{{=it.tabUrl}}" data-tab-mode="{{=it.tabMode}}" data-loaded="false">{{=it.shortName}}</a>'):s},onOpen:function(t){},onClick:function(t){},onHover:function(t){}},u=function(t,e){return this.$element=t,this.options=e,this.init(),this};t.extend(u.prototype,{constructor:u,VERSION:h,newMenu:null,init:function(){var e=this,i=e.options,s=t.extend(!0,{},i,{open:function(s){e.openSubMenu(s.item),t.isFunction(i.onOpen)&&i.onOpen(t(s.item))}});return e.newMenu=this.$element.kendoMenu(s).data("kendoMenu"),e.refreshMenu(function(){r(e)}),e},refreshMenu:function(e){var i=this,s=i.options;return s.localData?(i.renderMenu(s.localData.data),t.isFunction(e)&&e()):s.getData(s.url,s.ajax,function(s,a,n){i.renderMenu(s),t.isFunction(e)&&e()}),this},renderMenu:function(e){var i=n(e,this.options,!0),s=this.newMenu;return s.remove(t("li",t("li[data-main]",s.element))).append(i,t("li[data-main]",s.element)),t("li[data-main]",s.element).data("main","true"),this},openSubMenu:function(e){var i=this,a=i.options,o=t(e),r=o.children("span").children("a");if(o.data("main")!=s&&0==o.data("main"))return a.getData(a.url,a.ajax,function(t,e,s){var r=n(t,a,!0);i.newMenu.append(r,o)}),o.data("main","true"),r.data("loaded","true"),i;if(r.data("loaded")!=s&&0==r.data("loaded")){var d=r.data("submenuUrl");if(!d)return r.data("loaded","true"),i;a.getData(d,a.ajax,function(t,e,s){var r=n(t,a,!1);i.newMenu.append(r,o)}),r.data("loaded","true")}}}),t.fn[l]=function(e){var i=t.extend(!0,{},t.fn[l].defaults,e);return this.each(function(){var e=t(this);t(this).data(l)||e.data(l,new t.fn[l].constructor(e,i))})},t.fn[l].defaults=c,t.fn[l].constructor=u})},function(t,e,i){var s,a;!function(n){s=[i(1)],a=function(t){return n(t,window,document)}.apply(e,s),!(void 0!==a&&(t.exports=a))}(function(t,e,i,s){"use strict";var a="udeskNotice",n="1.0.0-Beta1",o={target:'<div class="notice-handler" style="display:none;"></div>',displayZone:'<div class="notice-display-zone"></div>',name:"Notification",position:{pinned:!0,top:30,right:30},stacking:"down",hideOnClick:!0,button:!0,allowHideAfter:0,autoHideAfter:0,appendTo:null,width:null,height:null,templates:[{type:"success",template:'<div class="udesk-notice"><div class="notice-image"/><div><h4><b>成功</b></h4>#if(message){#<p>#=message#</p>#}##if(detail){#<p>#=detail#<a><i class="fa fa-plus"></i></a></p>#}#</div>'},{type:"warning",template:'<div class="udesk-notice"><div class="notice-image"/><div><h4><b>警告</b></h4>#if(message){#<p>#=message#</p>#}##if(detail){#<p>#=detail#<a><i class="fa fa-plus"></i></a></p>#}#</div>'},{type:"error",template:'<div class="udesk-notice"><div class="notice-image"/><div><h4><b>失败</b></h4>#if(message){#<p>#=message#</p>#}##if(detail){#<p>#=detail#<a><i class="fa fa-plus"></i></a></p>#}#</div>'},{type:"info",template:'<div class="udesk-notice"><div class="notice-image"/><div><h4><b>通知</b></h4>#if(message){#<p>#=message#</p>#}##if(detail){#<p>#=detail#<a><i class="fa fa-plus"></i></a></p>#}#</div>'}],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}},onShow:function(t){},onHide:function(t){}},r=function(t,e){return this.$element=t,this.options=e,this.init(),this};t.extend(r.prototype,{constructor:r,VERSION:n,notice:s,init:function(){var e=this.options,i=t.extend(!0,{},e,{show:e.onShow,hide:e.onHide,appendTo:t(e.displayZone).appendTo(this.$element)});return this.notice=t(e.target).appendTo(this.$element).kendoNotification(i).data("kendoNotification"),this},show:function(t,e){return this.notice.show(t,e),this},hideAll:function(){return this.notice.hide(),this}}),t.fn[a]=function(e){var i=t.extend(!0,{},t.fn[a].defaults,e);return this.each(function(){var e=t(this);t(this).data(a)||e.data(a,new t.fn[a].constructor(e,i))})},t.fn[a].defaults=o,t.fn[a].constructor=r})},function(t,e,i){var s,a;!function(n){s=[i(1)],a=function(t){return n(t,window,document)}.apply(e,s),!(void 0!==a&&(t.exports=a))}(function(t,e,i,s){"use strict";function a(e,i,s){var a=t.extend(!0,{},{success:function(e,i,a){t.isFunction(s)&&s(e,i,a)}},i);t.isFunction(r.ajax)?r.ajax(e,a):t.isFunction(t.ajax)?t.ajax(a):console.error("未找到ajax方法定义，加载侧边栏菜单失败")}function n(e){var s=e,a=s.options,n=t(a.selector.mainSidebar),o=i.documentElement.clientWidth,r=n.data(a.slideFlag);o<a.toggleWidth&&(!0===r||"true"==r)?s.slideClose():o>a.toggleWidth&&(!1===r||"false"==r)&&s.slideOpen()}function o(i){var s=i;return t(s.options.selector.toggle).click(function(){s.slideToggle()}),t(e).resize(function(){n(s)}),s}var r=e.udesk=e.udesk||{},d="udeskSidebar",l="3.0.0-Beta1.1",h={localData:s,url:"",newMenu:{newMenu:null,localData:s,url:""},treeMenu:{treeMenu:null,localData:s,url:""},selector:{newMenu:"#newMenu",treeMenu:".sidebar",mainSidebar:".main-sidebar",reducedSidebar:".sidebar-reduced",toggle:".sidebar-toggle",content:".content-wrapper"},ajax:null,getData:a,templates:null,toggleWidth:800,slideFlag:"slideOpen",slideCss:[{marginLeft:"-230px"},{marginLeft:"0"},{marginLeft:"230px"}],slideSpeed:200,slideEasing:"linear",onInit:function(t){},onRefreshAll:function(t){},onSlideToggle:function(t){},onSlideOpen:function(t){},onSlideClose:function(t){}},c=function(t,e){return this.$element=t,this.options=e,this.init(),this};t.extend(c.prototype,{constructor:c,VERSION:l,newMenu:null,treeMenu:null,init:function(){var e=this,i=e.options,s=i.selector,a=i.newMenu,r=i.treeMenu,d=t(s.newMenu,e.$element),l=t(s.treeMenu,e.$element);
return a.localData=a.localData||i.localData,r.localData=r.localData||i.localData,a.url=a.url||i.url,r.url=r.url||i.url,d.length>0&&(e.newMenu=t.isFunction(a.newMenu)?a.newMenu:d.udeskNewMenu(a).data("udeskNewMenu")),l.length>0&&(e.treeMenu=t.isFunction(r.treeMenu)?r.treeMenu:l.udeskTreeMenu(r).data("udeskTreeMenu")),n(e),o(e),t.isFunction(i.onInit)&&i.onInit(e.$element),e},refreshAllSysMenu:function(e){var i=this.options;return this.newMenu&&this.newMenu.refreshMenu(),this.treeMenu&&this.treeMenu.refreshMenu(),t.isFunction(e)&&e(this.$element),t.isFunction(i.onRefreshAll)&&i.onRefreshAll(this.$element),this},slideOpen:function(e){var i=this,s=i.options,a=s.selector,n=i.$element,o=s.slideCss,r=t(a.mainSidebar),d=t(a.reducedSidebar),l=t(a.content),h=r.data(s.slideFlag);return 1==h||"true"==h||"opening"==h?(t.isFunction(e)&&e(n),t.isFunction(s.onSlideOpen)&&s.onSlideOpen(n),i):(r.data(s.slideFlag,"opening"),l.stop(!0).animate(o[2],{queue:!1,duration:s.slideSpeed,easing:s.slideEasing}),d.addClass("hidden"),r.stop(!0).animate(o[1],{queue:!1,duration:s.slideSpeed,easing:s.slideEasing,complete:function(i){r.data(s.slideFlag,!0),t.isFunction(e)&&e(n),t.isFunction(s.onSlideOpen)&&s.onSlideOpen(n)}}),this)},slideClose:function(e){var i=this,s=i.options,a=i.options.selector,n=i.$element,o=s.slideCss,r=t(a.mainSidebar),d=(t(a.reducedSidebar),t(a.content)),l=r.data(s.slideFlag);return 0==l||"false"==l||"closing"==l?(t.isFunction(e)&&e(n),t.isFunction(s.onSlideClose)&&s.onSlideClose(n),i):(r.data(s.slideFlag,"closing"),d.stop(!0).animate(o[1],{queue:!1,duration:s.slideSpeed,easing:s.slideEasing,complete:function(){}}),r.stop(!0).animate(o[0],{queue:!1,duration:s.slideSpeed,easing:s.slideEasing,complete:function(){r.data(s.slideFlag,!1),t.isFunction(e)&&e(n),t.isFunction(s.onSlideClose)&&s.onSlideClose(n)}}),this)},slideToggle:function(e){var i=this,a=i.options,n=(i.options.selector,i.$element),o=n,r=o.data(a.slideFlag);return 1==r||"true"==r||s==r?i.slideClose(function(){t.isFunction(e)&&e(n),t.isFunction(a.onSlideToggle)&&a.onSlideToggle(n)}):i.slideOpen(function(){t.isFunction(e)&&e(n),t.isFunction(a.onSlideToggle)&&a.onSlideToggle(n)}),this}}),t.fn[d]=function(e){var i=t.extend(!0,{},t.fn[d].defaults,e);return this.each(function(){var e=t(this);t(this).data(d)||e.data(d,new t.fn[d].constructor(e,i))})},t.fn[d].defaults=h,t.fn[d].constructor=c})},function(t,e,i){var s,a;!function(n){s=[i(1)],a=function(t){return n(t,window,document)}.apply(e,s),!(void 0!==a&&(t.exports=a))}(function(t,e,i,s){"use strict";function a(e,i,s){var a=t.extend(!0,{},{success:function(e,i,a){t.isFunction(s)&&s(e,i,a)}},i);t.isFunction(r.ajax)?r.ajax(e,a):t.isFunction(t.ajax)?t.ajax(a):console.error("未找到ajax方法定义，加载侧边栏菜单失败")}function n(e,s){var a=i.documentElement.clientHeight;return t(e).css({height:a-s,position:"relative"})}function o(i){var s=i,a=s.options,o=s.options.selector;return t(o.headerRoot).on("click","li",function(){var e=parseInt(t(this).data("tabId"));s.changeTab(e),t.isFunction(a.onClick)&&a.onClick(t(this))}),t(o.headerRoot).on("hover","li",function(){t.isFunction(a.onHover)&&a.onHover(t(this))}),t(o.headerRoot).on("click","a.tab-close",function(e){e.stopPropagation();var i=parseInt(t(this).closest("li").data("tabId"));s.closeTab(i)}),t(e).resize(function(){s.adjustTabsWidth(),n(o.wrapper,a.heightReduced)}),s}var r=e.udesk=e.udesk||{},d="udeskTab",l="1.0.0-Beta1",h={loadingMask:{color:"#FFFFFF",template:'<div class="u-loadingmask"><a class="u-loadingimg"></a></div>',fadeSpeed:500},localData:s,url:"",ajax:{},getData:a,maxTabs:15,isIndexFixed:!1,dataBase:{data:s,schema:{model:{id:"idx",fields:{url:{type:"string"},idx:{type:"number",defaultValue:null},title:{type:"string",defaultValue:"新标签页"},menuId:{type:"string",defaultValue:null},sysId:{type:"string",defaultValue:null},mode:{type:"string",defaultValue:"iframe"},tdId:{type:"string",defaultValue:null},sndUrl:{type:"string",defaultValue:null}}}}},tabWidth:125,tabMarginR:10,heightReduced:50,templates:{header:kendo.template?kendo.template('<li data-tab-id="#=idx#" class="pr" title="#=title#"><a title="#=title#"><span>#=title#</span></a><a class="icon-remove tab-close"></a></li>'):s,content:kendo.template?kendo.template('<div class="tab-content-wrapper pr hidden" data-tab-id="#=idx#"></div>'):s,contentDiv:kendo.template?kendo.template('<div class="udesk-tab-div"><div>'):s,contentIframe:kendo.template?kendo.template('<iframe src="#=url#" name="udesk-tab-iframe-#=idx#" frameborder="no" height="100%" width="100%"></iframe>'):s},selector:{wrapper:".content-wrapper",headerRoot:"ul.tabsite",contentRoot:"#mainApplyContent",sidebar:".main-sidebar"},onInit:function(t){},onTabCreate:function(t){},onTabOpen:function(t){},onTabChange:function(t){},onTabClose:function(t){},onClick:function(t){},onHover:function(t){},onTabsFull:function(t){}},c=function(t,e){return this.$element=t,this.options=e,this.init(),this};t.extend(c.prototype,{constructor:c,VERSION:l,currentTabIdx:0,tabsCount:0,dataSource:s,init:function(){var e=this,i=e.options;return n(i.selector.wrapper,i.heightReduced),e.dataSource=new kendo.data.DataSource(i.dataBase),e.dataSource.sort({field:"idx",dir:"asc"}),e.tabsCount=i.isIndexFixed?e.getDisplayCount()-1:e.getDisplayCount(),o(e),t.isFunction(i.onInit)&&i.onInit(e),e},getDisplayCount:function(){return this.dataSource.data().length},changeTab:function(e){var i=this,s=i.options,a=i.options.selector;return e==i.currentTabIdx||(t('li[data-tab-id="'+e+'"]',a.headerRoot).addClass("active").siblings().removeClass("active"),t('div[data-tab-id="'+e+'"]',a.contentRoot).removeClass("hidden").siblings().addClass("hidden"),i.currentTabIdx=e,t.isFunction(s.onTabChange)&&s.onTabChange(i.$element)),i},createTab:function(e){var i=this,s=i.options,a=s.templates,n=s.selector,o=(t(a.header(e)).appendTo(n.headerRoot),t(a.content(e)).appendTo(n.contentRoot)),r=o.udeskLoadingMask(s.loadingMask).data("udeskLoadingMask");return e.mode&&"div"==e.mode?s.getData(e.url,s.ajax,function(n,d,l){t(a.contentDiv(e)).append(n).appendTo(o),r.removeMask(),t.isFunction(s.onTabCreate)&&s.onTabCreate(i.$element)}):t(a.contentIframe(e)).load(function(){e.sndUrl&&"null"!=e.sndUrl?(t(this).unbind(""),t(this)[0].onload=function(){r.removeMask()},t(this).prop("src",e.sndUrl)):(r.removeMask(),t.isFunction(s.onTabCreate)&&s.onTabCreate(i.$element))}).appendTo(o),i.adjustTabsWidth(),i},openTab:function(e){var i=this,s=i.options;i.dataSource.filter({field:"url",operator:"eq",value:e.url});var a=i.dataSource.view(),n=null;if(a.length<=0){if(i.getDisplayCount()>=s.maxTabs)return t.isFunction(s.onTabsFull)&&s.onTabsFull(i),i;e.idx=i.tabsCount+=1,e.sysId=e.sysId||"",n=i.dataSource.add(e),i.createTab(n)}else n=i.dataSource.get(a[0].idx);return t.isFunction(s.onTabOpen)&&s.onTabOpen(i.$element),i.changeTab(n.idx),i},adjustTabsWidth:function(){var e,i,s=this,a=s.options,n=s.options.selector,o=t(n.headerRoot),r=(t(n.sidebar),o[0].offsetWidth),d=s.getDisplayCount(),l=a.tabWidth-2+a.tabMarginR;return r>d*l?(e=a.tabWidth-2,i=a.tabMarginR):(e=r/d-3,i=1),t("li[data-tab-id]",n.headerRoot).width(e).css("marginRight",i),s},closeTab:function(e){var i=this,s=i.options,a=i.options.selector;if(0==e&&1==s.isIndexFixed);else{if(e==i.currentTabIdx){var n=parseInt(t('li[data-tab-id="'+e+'"]').prev().data("tabId")),o=parseInt(t('li[data-tab-id="'+e+'"]').next().data("tabId")),r=o||n;i.changeTab(r),i.currentTabIdx=r}t('div[data-tab-id="'+e+'"]',a.contentRoot).remove(),t('li[data-tab-id="'+e+'"]',a.headerRoot).remove(),i.dataSource.remove(i.dataSource.get(e)),i.adjustTabsWidth()}return t.isFunction(s.onTabClose)&&s.onTabClose(i.$element),i}}),t.fn[d]=function(e){var i=t.extend(!0,{},t.fn[d].defaults,e);return this.each(function(){var e=t(this);t(this).data(d)||e.data(d,new t.fn[d].constructor(e,i))})},t.fn[d].defaults=h,t.fn[d].constructor=c})},function(t,e,i){var s,a;!function(n){s=[i(1)],a=function(t){return n(t,window,document)}.apply(e,s),!(void 0!==a&&(t.exports=a))}(function(t,e,i,s){"use strict";function a(e){return t(e).length>0}function n(e,i){return t.isFunction(i)?i(e):(l.error("菜单项模板方法错误"),s)}function o(e,i,s,a){var n=t.extend(!0,{},i,{success:function(e,i,a){t.isFunction(s)&&s(e,i,a)},error:function(e,i,s){t.isFunction(a)&&a(e,i,s)}});t.isFunction(l.ajax)?l.ajax(e,n):t.isFunction(t.ajax)?t.ajax(n):console.error("未找到ajax方法定义，加载树形菜单失败")}function r(e,s){var a=i.documentElement.clientHeight;return t(e).css({height:a-s})}function d(i,s,a,n){var o=i,d=o.options;o.options.selector.treeMenu;t(s,o.$element).on("click","li a",function(e){var i=t(this),s=i.parent();o.loadSubmenu(s,function(){o.toggleMenu(i,function(){t.isFunction(d.onClick)&&d.onClick(s)})})}),t(s,o.$element).on("mouseover","li a",function(e){t.isFunction(d.onMouseover)&&d.onMouseover(t(this).parent())}),t(e).resize(function(){r(d.selector.mainRoot,d.heightReduced)})}var l=e.udesk=e.udesk||{},h=(e.kendoConsole||function(t){},"udeskTreeMenu"),c="3.0.0-Beta1.1",u={localData:s,url:s,ajax:{},getData:o,templates:{menuItem:l.template?l.template('{{var data=it; for(var i=0;i<data.length;i++){ }}<li class="treeview" data-menu-id="{{=data[i].menuId}}" data-sys-id="{{=data[i].sysId}}" data-submenu-url="{{= data[i].submenuUrl}}" data-tab-url="{{= data[i].tabUrl}}" data-tab-mode="{{=data[i].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=data[i].icon}}"></i><span data-treemenu-type="title">{{=data[i].shortName}}</span>{{if(data[i].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a>{{if(data[i].items) {var sdata=data[i].items;}}<ul class="treeview-menu" style="display:none;"> {{for(var j=0;j<sdata.length;j++){ }} <li data-menu-id="{{=sdata[j].menuId}}" data-sys-id="{{=sdata[j].sysId}}" data-submenu-url="{{=sdata[j].submenuUrl}}" data-tab-url="{{=sdata[j].tabUrl}}" data-tab-mode="{{=sdata[j].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=sdata[j].icon}}"></i><span data-treemenu-type="title">{{=sdata[j].shortName}}</span>{{if(sdata[j].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a>{{if(sdata[j].items){var ssdata=sdata[j].items;}} <ul class="treeview-menu" style="display:none;"> {{for(var k=0;k<ssdata.length;k++){ }} <li data-menu-id="{{=ssdata[k].menuId}}" data-sys-id="{{=ssdata[k].sysId}}" data-submenu-url="{{=ssdata[k].submenuUrl}}" data-tab-url="{{=ssdata[k].tabUrl}}" data-tab-mode="{{=ssdata[k].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=ssdata[k].icon}}"></i><span data-treemenu-type="title">{{=ssdata[k].shortName}}</span>{{if(ssdata[k].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a> {{if(ssdata[k].items){var sssdata=ssdata[k].items;}} <ul class="treeview-menu" style="display:none;"> {{for(var l=0;l<sssdata.length;l++){ }} <li data-menu-id="{{=sssdata[l].menuId}}" data-sys-id="{{=sssdata[l].sysId}}" data-submenu-url="{{=sssdata[l].submenuUrl}}" data-tab-url="{{=sssdata[l].tabUrl}}" data-tab-mode="{{=sssdata[l].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=sssdata[l].icon}}"></i><span data-treemenu-type="title">{{=sssdata[l].shortName}}</span>{{if(sssdata[l].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a> {{if(sssdata[l].items){var ssssdata=sssdata[l].items;}} <ul class="treeview-menu" style="display:none;"> {{for(var m=0;m<ssssdata.length;m++){ }} <li data-menu-id="{{=ssssdata[m].menuId}}" data-sys-id="{{=ssssdata[m].sysId}}" data-submenu-url="{{=ssssdata[m].submenuUrl}}" data-tab-url="{{=ssssdata[m].tabUrl}}" data-tab-mode="{{=ssssdata[m].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=ssssdata[m].icon}}"></i><span data-treemenu-type="title">{{=ssssdata[m].shortName}}</span>{{if(ssssdata[m].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a> </li> {{ } }} </ul> {{ } }} </li> {{ } }} </ul> {{ } }} </li> {{ } }} </ul> {{ } }} </li> {{ } }} </ul> {{ } }} </li> {{ } }}'):s,submenuItem:l.template?l.template('<ul class="treeview-menu" style="display:none;" > {{var data=it; for(var i=0;i<data.length;i++){ }} <li data-sys-id="{{=data[i].sysId}}" data-submenu-url="{{=data[i].submenuUrl}}" data-tab-url="{{=data[i].tabUrl}}" data-tab-mode="{{=data[i].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=data[i].icon}}"></i><span data-treemenu-type="title">{{= data[i].shortName}}</span>{{if(data[i].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a> {{if(data[i].items) {var sdata=data[i].items;}} <ul class="treeview-menu" style="display:none;"> {{for(var j=0;j<sdata.length;j++){ }} <li data-menu-id="{{=sdata[j].menuId}}" data-sys-id="{{=sdata[j].sysId}}" data-submenu-url="{{=sdata[j].submenuUrl}}" data-tab-url="{{=sdata[j].tabUrl}}" data-tab-mode="{{=sdata[j].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=sdata[j].icon}}"></i><span data-treemenu-type="title">{{=sdata[j].shortName}}</span>{{if(sdata[j].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a> {{if(sdata[j].items){var ssdata=sdata[j].items;}} <ul class="treeview-menu" style="display:none;"> {{for(var k=0;k<ssdata.length;k++){ }} <li data-menu-id="{{=ssdata[k].menuId}}" data-sys-id="{{=ssdata[k].sysId}}" data-submenu-url="{{=ssdata[k].submenuUrl}}" data-tab-url="{{=ssdata[k].tabUrl}}" data-tab-mode="{{=ssdata[k].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=ssdata[k].icon}}"></i><span data-treemenu-type="title">{{=ssdata[k].shortName}}</span>{{if(ssdata[k].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a> {{if(ssdata[k].items){var sssdata=ssdata[k].items;}} <ul class="treeview-menu" style="display:none;"> {{for(var l=0;l<sssdata.length;l++){ }} <li data-menu-id="{{=sssdata[l].menuId}}" data-sys-id="{{=sssdata[l].sysId}}" data-submenu-url="{{=sssdata[l].submenuUrl}}" data-tab-url="{{=sssdata[l].tabUrl}}" data-tab-mode="{{=sssdata[l].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=sssdata[l].icon}}"></i><span data-treemenu-type="title">{{=sssdata[l].shortName}}</span>{{if(sssdata[l].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a> {{if(sssdata[l].items){var ssssdata=sssdata[l].items;}} <ul class="treeview-menu" style="display:none;"> {{for(var m=0;m<ssssdata.length;m++){ }} <li data-menu-id="{{=ssssdata[m].menuId}}" data-sys-id="{{=ssssdata[m].sysId}}" data-submenu-url="{{=ssssdata[m].submenuUrl}}" data-tab-url="{{=ssssdata[m].tabUrl}}" data-tab-mode="{{=ssssdata[m].tabMode}}" data-loaded="false"> <a><i class="icon-sidebar {{=ssssdata[m].icon}}"></i><span data-treemenu-type="title">{{=ssssdata[m].shortName}}</span>{{if(ssssdata[m].items){ }}<i class="icon-menu-expand"></i>{{ } }}</a> </li> {{ } }} </ul> {{ } }} </li> {{ } }} </ul> {{ } }} </li> {{ } }} </ul> {{ } }} </li> {{ } }} </ul> {{ } }} </li> {{ } }} </ul>'):s,reducedmenuItem:kendo.template?kendo.template('# for(var i=0;i<data.length;i++){ #<li class="clearfix" data-sys-id="#=data[i].sysId#" data-submenu-url="#= data[i].submenuUrl#" data-tab-url="#=data[i].tabUrl#" data-tab-mode="#=data[i].tabMode#" data-title="#= data[i].shortName#" data-loaded="false"><i class="icon-sidebar #=data[i].icon#"></i> </li># } #'):s},selector:{wrapper:".main-sidebar",mainRoot:"#mainSideBarMenu",reducedRoot:"#reducedSideBarMenu",treeMenu:".treeview-menu",gradeOneItem:".treeview",indexItem:'li[data-treemenu-role="index"]',expandIcon:"icon-menu-expand",loadingIcon:"icon-loadingimg"},speed:200,heightReduced:50,onInit:function(t){},onClick:function(t){},onMouseover:function(t){},onRefresh:function(t){}},_=function(t,e){return this.$element=t,this.options=e,this.init(),this};t.extend(_.prototype,{constructor:_,VERSION:c,init:function(){var e=this,i=e.options,s=i.selector;return t(s.mainRoot,e.$element).length||t("<ul/>",{"class":"sidebar-menu",id:s.mainRoot.slice(1,s.mainRoot.length)}).appendTo(e.$element),e.refreshMenu(function(){r(i.selector.mainRoot,i.heightReduced),d(e,s.mainRoot,s.reducedRoot,i.speed),t.isFunction(i.onInit)&&i.onInit(t(s.mainRoot,e.$element).children().first())}),e},refreshMenu:function(e){var i=this,s=i.options,a=i.$element;return s.localData?i.renderMenu(s.localData.data,function(){t.isFunction(e)&&e(a),t.isFunction(s.onRefresh)&&s.onRefresh(a)}):s.url&&s.getData(s.url,s.ajax,function(n,o,r){i.renderMenu(n,function(){t.isFunction(e)&&e(a),t.isFunction(s.onRefresh)&&s.onRefresh(a)})}),i},loadSubmenu:function(e,i){var s=this,a=s.options,n=a.selector,o=n.expandIcon,r=n.loadingIcon,d=e.data("submenuUrl"),l=e.children("a"),h=e.data("loaded");return"loading"==h?!1:"true"==h||1==h?(t.isFunction(i)&&i(e),s):d?(e.data("loaded","loading"),l.find("."+o).length?l.find("."+o).first().removeClass(o).addClass(r).html("    ").siblings("."+o).remove():l.find("."+r).length?l.find("."+r).first().siblings("."+r).remove():l.children("span").after('<i class="'+r+'">    </i>'),a.getData(d,a.ajax,function(a,n,d){e.children("a").find("."+r).first().removeClass(r).addClass(o).siblings("."+r).remove(),e.data("loaded",!0),s.renderSubmenu(a,e),t.isFunction(i)&&i(a,n,d)},function(t,i,s){e.data("loaded",!1)}),s):(t.isFunction(i)&&i(e),s)},loadSubmenuById:function(e,i){return this.loadSubmenu(t("li[data-menu-id="+e+"]",this.$element),i)},renderMenu:function(e,i){var s=this,o=s.options,r=o.selector,d=t(r.mainRoot,s.$element),l=(t(r.redocedRoot,s.$element),r.indexItem),h=o.templates;o.speed;return a(d.children(l))?(d.children(l).siblings().remove(),d.append(n(e,h.menuItem))):d.empty().append(n(e,h.menuItem)),t.isFunction(i)&&i(),s},renderSubmenu:function(e,i,s){var a=this;t(i,a.$element).find(a.options.selector.treeMenu).remove();var o=n(e,a.options.templates.submenuItem);return t(i,a.$element).append(o),t.isFunction(s)&&s(),a},renderSubmenuById:function(e,i,s){return this.renderSubmenu(t("li[data-menu-id="+i+"]",this.$element),s)},openMenu:function(e,i){var s=this,a=this.options,n=a.selector,o=n.treeMenu,r=a.speed,d=e.parent(),l=e.parentsUntil(n.gradeOneClass,o),h=function(e,i){var s=e.parent(),a=e.children(o);e.hasClass("active")?(a.find(".active").removeClass("active"),t.isFunction(i)&&i()):(s.children().each(function(){t(this).removeClass("active").find(o+".menu-open").removeClass("menu-open").stop(!0).slideUp(r,function(){t(this).find(".active").removeClass("active")})}),e.addClass("active"),a.length?a.is(":visible")?(a.find(".active").removeClass("active"),t.isFunction(i)&&i()):a.stop(!0).slideDown(r,function(){a.addClass("menu-open"),t.isFunction(i)&&i()}):(e.addClass("active"),t.isFunction(i)&&i()))},c=function(e,s){return 0>s||!e[s]?void h(d,i):void(t(e[s]).is(":visible")?c(e,s-1):h(t(e[s].parentNode),function(){c(e,s-1)}))};return c(l,l.length-1),s},openMenuById:function(e,i){return this.openMenu(t("[data-menu-id="+e+"] > a",this.$element),i)},closeMenu:function(e,i){var s=this,a=this.options,n=a.speed;return e.parent().removeClass("active").find(a.selector.treeMenu+".menu-open").stop(!0).removeClass("menu-open").slideUp(n,function(){t(this).children(".active").removeClass("active"),t.isFunction(i)&&i()}),s},closeMenuById:function(e,i){return this.closeMenu(t("[data-menu-id="+e+"] > a",this.$element),i)},toggleMenu:function(t,e){var i=this.options.selector.treeMenu,s=t.siblings(i);return s.is(i)&&s.is(":visible")?this.closeMenu(t,e):this.openMenu(t,e)},toggleMenuById:function(e,i){return this.toggleMenu(t("[data-menu-id="+e+"] > a",this.$element),i)}}),t.fn[h]=function(e){var i=t.extend(!0,{},t.fn[h].defaults,e);return this.each(function(){var e=t(this);t(this).data(h)||e.data(h,new t.fn[h].constructor(e,i))})},t.fn[h].defaults=u,t.fn[h].constructor=_})}]);